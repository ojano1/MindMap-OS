/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
If you want to view the source, see the repository of this plugin.
*/
"use strict";var j=Object.defineProperty;var te=Object.getOwnPropertyDescriptor;var ae=Object.getOwnPropertyNames;var ne=Object.prototype.hasOwnProperty;var re=(e,t)=>{for(var a in t)j(e,a,{get:t[a],enumerable:!0})},oe=(e,t,a,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let o of ae(t))!ne.call(e,o)&&o!==a&&j(e,o,{get:()=>t[o],enumerable:!(n=te(t,o))||n.enumerable});return e};var ie=e=>oe(j({},"__esModule",{value:!0}),e);var Oe={};re(Oe,{default:()=>$});module.exports=ie(Oe);var k=require("obsidian");var W=require("obsidian");var T=require("obsidian");function u(e=new Date){let t=e.getTimezoneOffset();return new Date(e.getTime()-t*6e4).toISOString().slice(0,10)}function se(e=new Date){return e.toLocaleDateString(void 0,{weekday:"long"})}function ce(e=new Date){return e.toLocaleDateString(void 0,{month:"short"})}function le(e=new Date){return e.getFullYear()}function ue(e=new Date){return Math.floor(e.getMonth()/3)+1}function de(e=new Date){let t=new Date(Date.UTC(e.getFullYear(),e.getMonth(),e.getDate()));t.setUTCDate(t.getUTCDate()+4-(t.getUTCDay()||7));let a=new Date(Date.UTC(t.getUTCFullYear(),0,1));return Math.ceil(((+t-+a)/864e5+1)/7)}function K(e,t,a=new Date){let n={"{{title}}":t,"{{date}}":u(a),"{{dateLong}}":a.toLocaleDateString(void 0,{year:"numeric",month:"long",day:"numeric"}),"{{weekday}}":se(a),"{{monthShort}}":ce(a),"{{year}}":String(le(a)),"{{isoWeek}}":String(de(a)),"{{quarter}}":String(ue(a))},o=e;for(let[i,c]of Object.entries(n))o=o.split(i).join(c);return o}function ye(e,t){let a=(0,T.normalizePath)(t);return e.vault.getAbstractFileByPath(a)??null}async function v(e,t){let a=(0,T.normalizePath)(t).split("/"),n="";for(let o of a)n=n?`${n}/${o}`:o,e.vault.getAbstractFileByPath(n)||await e.vault.createFolder(n)}async function p(e,t,a){let n=(0,T.normalizePath)(t);if(!ye(e,n)){let i=n.split("/").slice(0,-1).join("/");i&&await v(e,i),await e.vault.create(n,a)}}var b=require("obsidian");var g="03 SaveBox/Templates",L={area:`${g}/Area Template.md`,wish:`${g}/Wish Template.md`,goal:`${g}/Goal Template.md`,project:`${g}/Project Template.md`,task:`${g}/Task Template.md`,habit:`${g}/Habit Template.md`,note:`${g}/Note Template.md`,daily:`${g}/Daily Template.md`,weekly:`${g}/Weekly Template.md`,monthly:`${g}/Monthly Template.md`,quarterly:`${g}/Quarterly Template.md`,yearly:`${g}/Yearly Template.md`},C={area:`---
created: {{date}}
status: Active
priority: Medium
tags: []
---
# {{title}}

This page defines one part of your life that matters.
Break it into **Wishes** you\u2019d love to reach.

## Step 1 \u2013 List Your Wishes
*Use links (prefix: \`wish \`).*
- [[wish \u2013 ]]
- 
`,wish:`---
created: {{date}}
status: Active
priority: Medium
tags: []
---
# {{title}}

Break this Wish into **Goals** you control.

## Step 1 \u2013 List Your Goals
**Action + measurable outcome + timeframe**

**Examples:**
- Launch 10 products in 4 months
- Build 1,000-subscriber email list in 3 months

### \u270D\uFE0F My Goals
- [[goal \u2013 ]]
- 
`,goal:`---
created: {{date}}
status: Active
done: false
priority: Medium
tags: []
---
### My Goal
- [ ] {{title}}

Break this Goal into **Projects** (milestones).

## Step 1 \u2013 List Your Projects
**Deliverable + scope + time frame**

**Examples:**
- Build Product MVP in 4 weeks
- Create Email Launch Sequence in 6 weeks

### \u270D\uFE0F My Projects
- [[project \u2013 ]]
- 
`,project:`---
created: {{date}}
status: Active
done: false
priority: Medium
tags: []
---
### My Project
- [ ] {{title}}

Break it into **Tasks** and **Habits**.

## Tasks (\u22641h)
- [[task \u2013 ]]
- 

## Habits (repeatable)
- [[habit \u2013 ]]
- 
`,task:`---
created: 2025-10-16
_task_sync_state: false
done: false
status: Active
impact: Medium
slot: Morning
duration_hours:
tags: []
due:
---

### My Task
- [ ] {{title}}
A one-time action you can finish in about an hour.
---
### Properties to fill
- **Impact**: Select one in Properties. Options: Hi, Med, Lo.
- **duration_hours**: Set a number. Example: 0.5 or 1.
---
### Keep in mind
- Split big tasks to keep them small enough for one sitting (target 1hr max).
This way it would more friendly to your daily time budget.
---
[[Link to the daily page]]
---
<p align="center">MindMap OS \xA9 All rights reserved</p>
`,habit:`---
created: {{date}}
status: Active
done: false
priority: Medium
tags: []
---
# {{title}}

Describe the habit and frequency (e.g., daily, Mon Thu, monthly on the 1st).
`,note:`---
created: {{date}}
status: Active
tags: []
---
# {{title}}
Write freely. Link with [[...]].
`,daily:`# {{dateLong}}

## \u270D\uFE0F Inbox
- 

## Highlights
- 

## Next actions
- 
`,weekly:`# \u{1F4C5} Week {{isoWeek}} {{year}}
> Review goals and plan the week.
`,monthly:`# \u{1F4C5} {{monthShort}} {{year}}
> Review progress. Pick key projects and habits.
`,quarterly:`# \u{1F4C5} Q{{quarter}} {{year}}
> Choose focus goals. Align projects.
`,yearly:`# \u{1F4C5} Year {{year}}
> Define areas and high-level goals.
`};async function S(e,t,a,n=new Date){let o=(0,b.normalizePath)(L[t]),i=e.vault.getAbstractFileByPath(o);return i instanceof b.TFile?(console.log(`[MMOS] Using VAULT template for ${t}: ${o}`),await e.vault.read(i)):(console.log(`[MMOS] Using FALLBACK template for ${t}`),K(C[t],a,n))}async function _(e,t){let{kind:a,title:n}=t,o=t.path??pe(a,n),i=o.substring(0,o.lastIndexOf("/"));i&&await v(e,i);let c=await S(e,a,n,new Date),s=await e.vault.create(o,c);return await e.fileManager.processFrontMatter(s,r=>{r.created??(r.created=u(new Date)),a==="task"?(r.status??(r.status="Active"),r.impact??(r.impact="Med"),r.slot??(r.slot="Morning"),r.done??(r.done=!1),r.priority??(r.priority="Medium")):a==="goal"||a==="project"||a==="habit"?(r.status??(r.status="Active"),r.done??(r.done=!1),r.priority??(r.priority="Medium")):(a==="area"||a==="note")&&(r.status??(r.status="Active"))}),s}async function N(e){let t=["01 Definition","02 Execution/1 Daily","02 Execution/2 Weekly","02 Execution/3 Monthly","02 Execution/4 Quarterly","02 Execution/5 Yearly","03 SaveBox/Active","03 SaveBox/Archive","03 SaveBox/Attachment","03 SaveBox/Scripts","03 SaveBox/Templates","04 Output","99 System"];for(let a of t)await v(e,a);await p(e,"Welcome.md",`# \u{1F44B} Welcome to MindMap OS

Use **MindMap OS \u2192 Create Starter Structure** any time.
`),await p(e,"01 Definition/\u{1F3C1} Start Here.md",`# \u{1F3C1} MindMap OS \u2013 Start Here

### Top-Down
Areas \u2192 Goals \u2192 Projects \u2192 Tasks. Best way to start.

### Bottom-Up
Capture anything anywhere. It lands in your **Daily inbox** for linking later.

### First step
Example: [[area Health]]
- 
- 
`),await p(e,"01 Definition/\u{1F9E0} Mind Map.md",`# \u{1F9E0} Mind Map
Link Areas, Goals, Projects here.
`),await p(e,"02 Execution/\u{1F50D} Read Me First.md",`# Execution Flow
Year \u2192 Quarter \u2192 Month \u2192 Week \u2192 Day.
`),await p(e,"04 Output/Untitled.md",`# Output
Export or publish here.
`);for(let[a,n]of Object.entries(L))await p(e,n,C[a]);await p(e,"03 SaveBox/Active/\u{1F331}Area - Life.md",`---
created: ${u(new Date)}
status: Active
---
# \u{1F331}Area - Life
`),await p(e,"03 SaveBox/Active/\u{1F3AF}Goal - Launch v1.md",`---
created: ${u(new Date)}
status: Active
done: false
---
### My Goal
- [ ] \u{1F3AF}Goal - Launch v1
`),await p(e,"03 SaveBox/Active/\u{1F680}Project - Landing Page.md",`---
created: ${u(new Date)}
status: Active
done: false
---
### My Project
- [ ] \u{1F680}Project - Landing Page
`),await p(e,"03 SaveBox/Active/\u{1F4CC}Task - Draft copy.md",`---
created: ${u(new Date)}
status: Active
impact: Med
slot: Morning
done: false
priority: Medium
duration_hours:
tags: []
---
### My Task
- [ ] \u{1F4CC}Task - Draft copy
`),await p(e,"99 System/Home.md",["# Welcome to MindMap OS","","- **MindMap OS \u2192 Create Starter Structure**","- **MindMap OS \u2192 New Goal / Project / Task**","- **MindMap OS \u2192 Open Today**",""].join(`
`)),new W.Notice("\u2705 MindMap OS: starter structure updated.")}function pe(e,t){let a=he(t);switch(e){case"daily":return`02 Execution/1 Daily/${a}.md`;case"weekly":return`02 Execution/2 Weekly/${a}.md`;case"monthly":return`02 Execution/3 Monthly/${a}.md`;case"quarterly":return`02 Execution/4 Quarterly/${a}.md`;case"yearly":return`02 Execution/5 Yearly/${a}.md`;case"note":return`03 SaveBox/Active/${a}.md`;default:return`03 SaveBox/Active/${ge(e)}${a}.md`}}function ge(e){switch(e){case"area":return"\u{1F331}Area - ";case"wish":return"\u2728Wish - ";case"goal":return"\u{1F3AF}Goal - ";case"project":return"\u{1F680}Project - ";case"task":return"\u{1F4CC}Task - ";case"habit":return"\u{1F501}Habit - ";default:return""}}function he(e){return e.replace(/[\\/:*?"<>|]/g,"").trim()}var D=require("obsidian");var me=["task","project","goal","area","habit","note","daily","weekly","monthly","quarterly","yearly","wish"],we={area:"\u{1F331}Area - ",wish:"\u2728Wish - ",goal:"\u{1F3AF}Goal - ",project:"\u{1F680}Project - ",task:"\u{1F4CC}Task - ",habit:"\u{1F504}Habit - ",note:"",daily:"",weekly:"",monthly:"",quarterly:"",yearly:""};function fe(e){return e instanceof D.TFile&&e.extension.toLowerCase()==="md"}function xe(e){let t=e.match(/^(\w+)\s*(?:[-â€“]\s*|\s+)(.+)$/i);if(!t)return null;let a=t[1].toLowerCase();if(!me.includes(a))return null;let n=t[2].trim();return{kind:a,title:n}}function Te(e,t){let a=ke(t);switch(e){case"daily":return`02 Execution/1 Daily/${a}.md`;case"weekly":return`02 Execution/2 Weekly/${a}.md`;case"monthly":return`02 Execution/3 Monthly/${a}.md`;case"quarterly":return`02 Execution/4 Quarterly/${a}.md`;case"yearly":return`02 Execution/5 Yearly/${a}.md`;case"note":return`03 SaveBox/Active/${a}.md`;default:return`03 SaveBox/Active/${we[e]}${a}.md`}}function ke(e){return e.replace(/[\\/:*?"<>|]/g,"").trim()}async function Ae(e,t,a){await e.fileManager.processFrontMatter(t,n=>{n.created??(n.created=u(new Date)),a==="task"?(n.status??(n.status="Active"),n.impact??(n.impact="Medium"),n.slot??(n.slot="Morning"),n.done??(n.done=!1),n.duration_hours??(n.duration_hours=void 0),n.tags??(n.tags=[])):a==="goal"||a==="project"||a==="habit"?(n.status??(n.status="Active"),n.done??(n.done=!1)):(a==="area"||a==="note")&&(n.status??(n.status="Active"))})}function I(e){e.vault.on("create",async t=>{try{if(!fe(t)||(await e.vault.read(t)).trim().length>0)return;let n=t.basename,o=xe(n);if(!o)return;let{kind:i,title:c}=o,s=await S(e,i,c,new Date);await e.vault.modify(t,s),await Ae(e,t,i);let r=(0,D.normalizePath)(Te(i,c));r!==t.path&&await e.fileManager.renameFile(t,r),console.log(`[MMOS] wikilink routed \u2192 ${i} | ${c}`)}catch(a){console.error("[MMOS] wikilink routing error",a)}}),console.log("MMOS wikilink watcher: ON")}var R=require("obsidian");function Me(e){return String(e).replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function ve(e,t){let a=null;return(...n)=>{a&&window.clearTimeout(a),a=window.setTimeout(()=>{a=null,e(...n)},t)}}function q(e,t){let n=new RegExp(`^#{1,6}\\s+${Me(t)}\\s*$`,"gim").exec(e);if(!n)return null;let o=n.index+n[0].length,i=(n[0].match(/^#+/)||["#"])[0].length,c=new RegExp(`^#{1,${i}}\\s+`,"gim");c.lastIndex=o;let s=c.exec(e);return{start:o,end:s?s.index:e.length}}var G=/^[ \t>]*[-*]\s+\[( |x|X)\]\s.*$/gim;function H(e,t){let a=e.slice(t.start,t.end);G.lastIndex=0;let n=G.exec(a);if(!n)return null;let o=t.start+n.index,i=o+n[0].length,c=/\[(x|X)\]/.test(n[0]);return{absStart:o,absEnd:i,line:n[0],checked:c}}function Y(e,t){return e.replace(/\[(?: |x|X)\]/,t?"[x]":"[ ]")}var be=2e3;function Se(e){return/(^|\/)(templates?|Templates?)(\/|$)/.test(e)}function De(e){return e?.template===!0||e?.is_template===!0||e?.type==="template"}function Fe(e){return/<%[\s\S]*?%>/.test(e)}function Pe(e){let t=e?.stat?.ctime??0;return Date.now()-t<be}function U(e){let t=new Set,a=e.vault.on("modify",r=>{t.has(r.path)&&e?.notifier?.hideAll&&e.notifier.hideAll()}),n=r=>{let l=e.workspace.getActiveViewOfType(R.MarkdownView),y=!!l&&l.file?.path===r.path&&l?.getMode()!=="preview";return{editor:l?.editor,inEdit:y}},o=async(r,l)=>{t.add(r.path);try{await e.fileManager.processFrontMatter(r,d=>{for(let y of Object.keys(l))d[y]=l[y]})}finally{t.delete(r.path)}},i=async(r,l,d,y,A)=>{let{editor:h,inEdit:O}=n(r);t.add(r.path);try{if(O&&h){let w=h.offsetToPos(d),m=h.offsetToPos(y);await new Promise(requestAnimationFrame),h.replaceRange(A,w,m)}else{let w=l.slice(0,d)+A+l.slice(y);w!==l&&await e.vault.modify(r,w)}}finally{t.delete(r.path)}},s=ve(async()=>{let r=e.workspace.getActiveFile();if(!r||Se(r.path))return;let d=(e.metadataCache.getFileCache(r)??{}).frontmatter??{};if(De(d))return;let{editor:y,inEdit:A}=n(r),h=A&&y?y.getValue():await e.vault.read(r);if(!h||Fe(h)||!/^#{1,6}\s+My\s+(Task|Project|Goal)\s*$/im.test(h)||Pe(r)||t.has(r.path))return;let w=[{heading:"My Task",flag:"_task_sync_state"},{heading:"My Project",flag:"_project_sync_state"},{heading:"My Goal",flag:"_goal_sync_state"}];for(let m of w){let B=q(h,m.heading);if(!B)continue;let f=H(h,B);if(!f)continue;let M=typeof d.done=="boolean"?d.done:null,E=typeof d[m.flag]=="boolean"?d[m.flag]:null,x=f.checked;if(E===null){await o(r,{done:!!x,[m.flag]:!!x});return}let Z=M!==null&&M!==E;if(x!==E){await o(r,{done:!!x,[m.flag]:!!x});return}if(Z){let ee=Y(f.line,!!M);await i(r,h,f.absStart,f.absEnd,ee),await o(r,{[m.flag]:!!M});return}return}},150);e.workspace.on("file-open",()=>s()),e.workspace.on("active-leaf-change",()=>s()),e.workspace.on("layout-change",()=>s()),e.workspace.on("editor-change",()=>s()),e.metadataCache.on("changed",()=>s()),e.metadataCache.on("resolved",()=>s()),e.vault.on("modify",()=>s()),e.vault.on("rename",()=>s()),e.vault.on("create",()=>s())}async function z(e,t){let n=(e.metadataCache.getFileCache(t)??{}).frontmatter??{},o=!(typeof n.done=="boolean"&&n.done);await e.fileManager.processFrontMatter(t,s=>{s.done=o});let i=await e.vault.read(t),c=["My Task","My Project","My Goal"];for(let s of c){let r=q(i,s);if(!r)continue;let l=H(i,r);if(!l)continue;let d=Y(l.line,o),y=i.slice(0,l.absStart)+d+i.slice(l.absEnd);y!==i&&await e.vault.modify(t,y);break}}var F=require("obsidian");var $e={area:"\u{1F331}Area - ",wish:"\u2728Wish - ",goal:"\u{1F3AF}Goal - ",project:"\u{1F680}Project - ",task:"\u{1F4CC}Task - ",habit:"\u{1F504}Habit - "};function Ee(e){return e.replace(/[\\/:*?"<>|]/g,"").trim()}function je(e,t){let a=Ee(t);switch(e){case"daily":return`02 Execution/1 Daily/${a}.md`;case"weekly":return`02 Execution/2 Weekly/${a}.md`;case"monthly":return`02 Execution/3 Monthly/${a}.md`;case"quarterly":return`02 Execution/4 Quarterly/${a}.md`;case"yearly":return`02 Execution/5 Yearly/${a}.md`;case"note":return`03 SaveBox/Active/${a}.md`;default:return`03 SaveBox/Active/${$e[e]}${a}.md`}}function Le(e,t){let a=e.vault.getAbstractFileByPath((0,F.normalizePath)(t));return a instanceof F.TFile?a:null}function Ce(e){let t=e.trim().toLowerCase(),a=new Date;return t==="today"?u(a):t==="tomorrow"?(a.setDate(a.getDate()+1),u(a)):t==="yesterday"?(a.setDate(a.getDate()-1),u(a)):/^\d{4}-\d{2}-\d{2}$/.test(e)?e:u(a)}async function P(e,t,a){let n=a;t==="daily"&&(n=Ce(a));let o=je(t,n),i=Le(e,o);if(i)return await e.workspace.getLeaf(!1).openFile(i),i;let c=await _(e,{kind:t,title:n});return await e.workspace.getLeaf(!1).openFile(c),c}var Q=(e,t)=>P(e,"task",t),V=(e,t)=>P(e,"project",t),X=(e,t)=>P(e,"goal",t);var J=(e,t="today")=>P(e,"daily",t);var $=class extends k.Plugin{async onload(){console.log("MindMap OS loaded"),I(this.app),U(this.app),this.addCommand({id:"mmos-create-starter-structure",name:"Create Starter Structure",callback:async()=>{await N(this.app),new k.Notice("Starter structure created.")}}),this.addCommand({id:"mmos-open-today",name:"Open Today",callback:async()=>{await J(this.app,"today")}}),this.addCommand({id:"mmos-new-task",name:"New Task\u2026",callback:async()=>{await Q(this.app,"New Task")}}),this.addCommand({id:"mmos-new-project",name:"New Project\u2026",callback:async()=>{await V(this.app,"New Project")}}),this.addCommand({id:"mmos-new-goal",name:"New Goal\u2026",callback:async()=>{await X(this.app,"New Goal")}}),this.addCommand({id:"mmos-toggle-done",name:"Toggle Done (YAML \u2194 checkbox)",callback:async()=>{let t=this.app.workspace.getActiveFile();t?await z(this.app,t):new k.Notice("No active file to toggle.")}})}onunload(){console.log("MindMap OS unloaded")}};
